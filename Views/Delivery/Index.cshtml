@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="https://code.jquery.com/jquery-3.6.3.slim.js" integrity="sha256-DKU1CmJ8kBuEwumaLuh9Tl/6ZB6jzGOBV/5YpNE2BWc=" crossorigin="anonymous"></script>
<!-- Render Body <Start> -->
<!--begin::Subheader-->
<div class="subheader py-2 py-lg-4 subheader-solid" id="kt_subheader">
    <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
        <!--begin::Info-->
        <div class="d-flex align-items-center flex-wrap mr-2">
            <!--begin::Page Title-->
            <h5 class="text-dark font-weight-bold mt-2 mb-2 mr-5">iSOl</h5>
            <!--end::Page Title-->
            <!--begin::Actions-->
            <div class="subheader-separator subheader-separator-ver mt-2 mb-2 mr-4 bg-gray-200">
            </div>
            <span class="text-muted font-weight-bold mr-2">Dashboard</span>
            <span class="font-weight-bolder">/ Delivery</span>
            <!--end::Actions-->
        </div>
        <!--end::Info-->

    </div>
</div>
<!--end::Subheader-->
<!--begin::Entry-->
<div class="container mt-5">

    <!--begin::Card-->
    <div class="card card-custom">
        <div class="card-header">
            <div class="card-title">
                <span class="card-icon">
                    <i class="flaticon-notepad text-primary"></i>
                </span>
                <h3 class="card-label">Delivery</h3>
            </div>
            @* <div class="card-toolbar">
            <button class="bt btn-brand"  type="button">
            Add
            </button>

            <!--end::Button-->
            </div>*@
            <div class="card-toolbar">
                <div class="btn-group">
                    <button type="button" id="btnAdd" class="btn btn-primary font-weight-bolder">
                        + Add Record
                    </button>
                </div>
            </div>
        </div>
        <div class="card-body">
            <!--begin: Datatable-->
            <table class="table table-striped- table-bordered table-hover table-checkable " id="AttTable">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>


                    </tr>
                </thead>
            </table>




            <!--end: Datatable-->
        </div>
    </div>

</div>
<!--end::Entry-->
<!-- Render Body <End> -->

<script>
    $(document).on('click', '#btnAdd', function () {

        //window.location.href = '/SaleQuotation/GetData?Source='+$('$Guid').val();
        window.location.href = '/Delivery/DeliveryMaster';
    })


    function generateTable() {

        datatable = $('#AttTable').DataTable({
            responsive: true,
            searching: true,
            ordering: false,
            //   order: [[2, 'asc']],
            ordering: false,
            "ajax": {

                // url: '/HrAdmin/GetAttendanceList_MainLines?Date=' + $('#FilterDate').val(),
                url: '/Delivery/GetDeliveryData',
            },

            layout: {
                scroll: false, // enable/disable datatable scroll both horizontal and vertical when needed.
                // height: 450, // datatable's body's fixed height
                footer: false, // display/hide footer
            },

            // column sorting
            sortable: true,

            pagination: true,
            destroy: true,
            //   async: false,
            search: {
                input: $('#generalSearch'),
            },
            columns: [

                //{
                //    data: '',
                //    width: 20,


                //}, {
                {
                    data: 'docDate', title: 'Doc Date', render: function (data, type, row) {
                        if (data != undefined && data != '') {

                            return moment(data).format('DD-MM-YYYY')

                        } else {
                            // return data;
                            return '';
                        }
                    }
                },
                {
                    data: 'postingDate', title: 'Posting Date', render: function (data, type, row) {
                        if (data != undefined && data != '') {

                            return moment(data).format('DD-MM-YYYY')

                        } else {
                            // return data;
                            return '';
                        }
                    }
                },
                {
                    data: 'docNum', title: 'DocNum',

                }, {
                    data: 'cardCode', title: 'Card Code'

                }, {
                    data: 'cardName', title: 'Card Name'

                }, {
                    data: 'guid', title: 'Action', render: function (data, type, row) {
                        var href = '/hradmin/attendancewizard?Source=9245fe4ad502471cb9ed9d1a0424748211012021054645346543145245AdusMkS6F12424456kajdhnGaiIulfkhInLPsHreia23afa&AType=M&Id=' + data;
                        return '<a href="' + href + '" class="btn btn-outline-brand btn-elevate "><i class="fa fa-pencil"></i></a>';
                    }

                },],
        });

    }

    $(document).ready(function () {

        generateTable();
    });
</script>
