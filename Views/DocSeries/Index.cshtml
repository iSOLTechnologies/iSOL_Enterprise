@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="https://code.jquery.com/jquery-3.6.3.slim.js" integrity="sha256-DKU1CmJ8kBuEwumaLuh9Tl/6ZB6jzGOBV/5YpNE2BWc=" crossorigin="anonymous"></script>
<!-- Render Body <Start> -->
<!--begin::Entry-->
<div class="container mt-5">

    <!--begin::Card-->
    <div class="card card-custom">
        <div class="card-header">
            <div class="card-title">
                <span class="card-icon">
                    <i class="flaticon-notepad text-primary"></i>
                </span>
                <h3 class="card-label">Document Series</h3>
            </div>
            @* <div class="card-toolbar">
            <button class="bt btn-brand"  type="button">
            Add
            </button>

            <!--end::Button-->
            </div>*@
            <div class="card-toolbar">
                <div class="btn-group">
                    @*<button type="button" id="btnAdd" class="btn btn-primary font-weight-bolder">
                        + Add Record
                    </button>*@
                </div>
            </div>
        </div>
        <div class="card-body">
            <!--begin: Datatable-->
            <table class="table table-striped- table-bordered table-hover table-checkable " id="AttTable">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                       


                    </tr>
                </thead>
            </table>
            


            <!--end: Datatable-->
        </div>
    </div>

</div>
<!--end::Entry-->
<!-- Render Body <End> -->

<script>
    //$(document).on('click', '#btnAdd', function () {

    //    //window.location.href = '/SaleQuotation/GetData?Source='+$('$Guid').val();
    //    window.location.href = '/Delivery/DeliveryMaster';
    //})

    function generateTable() {

        datatable = $('#AttTable').DataTable({
            responsive: true,
            searching: true,
            ordering: false,
         // order: [[2, 'asc']],
            ordering: false,
            "ajax": {

                // url: '/HrAdmin/GetAttendanceList_MainLines?Date=' + $('#FilterDate').val(),
                url: '/DocSeries/GetDocSeries',
            },

            layout: {
                scroll: false, // enable/disable datatable scroll both horizontal and vertical when needed.
                // height: 450, // datatable's body's fixed height
                footer: false, // display/hide footer
            },

            // column sorting
            sortable: true,

            pagination: true,
            destroy: true,
            //   async: false,
            search: {
                input: $('#generalSearch'),
            },
            columns: [
                 
                {
                    data: 'serialNo', title: '#',

                }, {
                    data: 'objectCode', title: 'Object Code'

                }, {
                    data: 'pageName', title: 'Page Name'

                }, {
                    data: "series", 'title': 'Series', render: function (data, type, row) {


                        return GetSelectList(data);



                    }
                }, {
                    data: "serialNo", 'title': 'Action', render: function (data, type, row) {

                        var html = '<a guid=' + data + ' id="btnFetchDelivery" class="btn btn-primary btn-sm mx-3">';
                        html += '<i class="fas fa-save"></i>';
                        html += ' Save</a>';
                        return html;

                    }
                },],
        });

    }

    $(document).ready(function () {

        generateTable();
    });

    function GetSelectList(series) 
    {
        let selectObj = "<select class='form-control'>";

        $.each(series, function(){
            selectObj +=" <option value=" + this.series + ">" + this.seriesName + "</option>";
        })
        selectObj += "</select>";
        
        return selectObj;
    }
    $(document).on('click', '#btnFetchDelivery', function (e) {

        var guid = $(this).attr("guid");
        window.location.href = '/Delivery/EditDeliveryMaster/' + guid + '';

    });
</script>
